<?xml version="1.0"?>
<project basedir="." default="compile">
	
	<property file="build.properties" />
	<taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask" classpath="${jscompiler}" />

	<!-- ============ Merges and minimizes JavaScript code into one file =============== -->
	
	<target name="compile">
		<jscomp compilationLevel="simple" debug="false" output="${basedir}/../../war/js/diagramly.min.js">
			<sources dir="${basedir}/../../war/js/mxgraph">
				<file name="mxClient.js" />
			</sources>
			
			<sources dir="${grapheditor.dir}">
				<file name="Editor.js" />
				<file name="Graph.js" />
				<file name="Shapes.js" />
				<file name="EditorUi.js" />
				<file name="Actions.js" />
				<file name="Menus.js" />
				<file name="Sidebar.js" />
				<file name="Toolbar.js" />
				<file name="Dialogs.js" />
			</sources>
			
			<sources dir="${basedir}/../../war/js/diagramly">
				<file name="Dialogs.js" />
				<file name="Sharing.js" />
				<file name="Diagramly.js" />
			</sources>
			
			<sources dir="${basedir}/../../war/js/sharejs">
				<file name="socket.io.js" />
				<file name="share.uncompressed.js" />
				<file name="json.uncompressed.js" />
			</sources>
		</jscomp>
	</target>

</project>
